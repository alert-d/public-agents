{
    "description": "Get elevation data for a city by first geocoding the city name to coordinates",
    "type": "plan",
    "version": "v0.0.1",
    "serial": [
        {
            "description": "Geocode the city name to get coordinates",
            "type": "fetch",
            "method": "GET",
            "url": "https://geocoding-api.open-meteo.com/v1/search",
            "params": {
                "name": "Denver, Colorado",
                "count": "1",
                "language": "en",
                "format": "json"
            },
            "stream": true,
            "name": "geocodingResults"
        },
        {
            "description": "Get elevation data using the coordinates",
            "type": "fetch",
            "method": "GET",
            "url": "https://api.open-meteo.com/v1/elevation",
            "params": {
                "latitude": "${$geocodingResults.results[0].latitude}",
                "longitude": "${$geocodingResults.results[0].longitude}"
            },
            "stream": true,
            "name": "elevationData"
        },
        {
            "description": "Display elevation data in table format",
            "type": "table",
            "title": "Elevation Data",
            "stream": false,
            "name": "elevationTable",
            "input": "${[{\"place_name\": $geocodingResults.results[0].name, \"latitude\": $geocodingResults.results[0].latitude, \"longitude\": $geocodingResults.results[0].longitude, \"country_code\": $geocodingResults.results[0].country_code, \"timezone\": $geocodingResults.results[0].timezone, \"elevation\": $elevationData.elevation[0]}]}"
        },
        {
            "description": "Analyze elevation data and provide insights",
            "model": "gpt-4",
            "type": "llm",
            "stream": true,
            "input": "${$elevationTable}",
            "query": "Based on the elevation data provided for ${$elevationTable[0].place_name}, give me a detailed analysis. Include: 1) The exact elevation in meters, 2) The significance of this elevation, 3) How this elevation might impact weather or living conditions in this location, 4) Geographic context and timezone implications."
        }
    ]
}
